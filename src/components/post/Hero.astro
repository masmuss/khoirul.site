---
import type { CollectionEntry } from "astro:content";
import { getReadTimeCount } from "@/lib/utils";
import FormattedDate from "../FormattedDate.astro";
import PostImage from "./PostImage.astro";

interface Props {
	content: CollectionEntry<"post">;
}

const { content } = Astro.props;

const dateTimeOptions: Intl.DateTimeFormatOptions = {
	month: "long",
};
---

<header class="flex flex-col items-center justify-center gap-4">
	<div class="flex flex-col items-center gap-3">
		<div class="text-muted-foreground flex items-center gap-2 text-sm">
			<FormattedDate date={new Date(content.data.date)} dateTimeOptions={dateTimeOptions} />
			<span>Â·</span>
			<span>{getReadTimeCount(content.body!)} min read</span>
		</div>
		<h1 class="text-center text-2xl leading-tight font-semibold md:text-3xl">
			{content.data.title}
		</h1>
		{
			content.data.tags.length > 0 && (
				<div class="flex flex-wrap items-center justify-center gap-2">
					{content.data.tags.map((tag) => (
						<a
							href={`/tags/${tag}/`}
							class="text-muted-foreground hover:text-foreground px-3 py-1 text-xs transition-colors"
						>
							# {tag}
						</a>
					))}
				</div>
			)
		}
	</div>
</header>

<>
	{
		content.data.coverImage && (
			<PostImage
				src={content.data.coverImage.src}
				alt={content.data.coverImage.alt || content.data.title}
			/>
		)
	}
</>
