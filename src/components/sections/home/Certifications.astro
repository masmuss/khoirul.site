---
import Section from "@/components/Section.astro";
import type { Certification } from "@/types";

interface Props {
	certifications: Certification[];
}

const { certifications } = Astro.props;
---

<Section title="Certifications">
	<div class="flex flex-col gap-y-2">
		{
			certifications.map((cert) => {
				const dateText = cert.expiredDate ? `${cert.date} - ${cert.expiredDate}` : cert.date;

				const content = (
					<div class="group flex flex-col gap-y-0.5 rounded-lg py-2">
						<div class="flex items-center gap-2">
							<span class="font-medium">{cert.title}</span>
							{cert.credentialUrl && (
								<span class="iconify text-muted-foreground ri--external-link-line text-sm opacity-0 transition-opacity group-hover:opacity-100" />
							)}
						</div>
						<div class="text-muted-foreground flex items-center gap-x-2 text-sm">
							<span>{cert.issuer}</span>
							<span>Â·</span>
							<span>{dateText}</span>
						</div>
						{cert.description && (
							<p class="text-muted-foreground mt-1 text-sm">{cert.description}</p>
						)}
					</div>
				);

				return cert.credentialUrl ? (
					<a
						href={cert.credentialUrl}
						target="_blank"
						rel="noopener noreferrer"
						class="hover:bg-muted/20 -mx-3 rounded-lg px-3 transition-colors"
					>
						{content}
					</a>
				) : (
					<div class="-mx-3 px-3">{content}</div>
				);
			})
		}
	</div>
</Section>
